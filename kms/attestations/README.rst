Google Cloud Key Management Service Python Samples
===============================================================================

.. image:: https://gstatic.com/cloudssh/images/open-btn.png
   :target: https://console.cloud.google.com/cloudshell/open?git_repo=https://github.com/GoogleCloudPlatform/python-docs-samples&page=editor&open_in_editor=kms/attestations/README.rst


This directory contains samples for Google Cloud Key Management Service. The `Cloud Key Management Service`_ allows you to create, import, and manage cryptographic keys and perform cryptographic operations in a single centralized cloud service.




.. _Cloud Key Management Service: https://cloud.google.com/kms/docs/





Setup
-------------------------------------------------------------------------------


Install Dependencies
++++++++++++++++++++

#. Clone python-kms and change directory to the sample directory you want to use.

    .. code-block:: bash

        $ git clone https://github.com/GoogleCloudPlatform/python-docs-samples.git

#. Install `pip`_ and `virtualenv`_ if you do not already have them. You may want to refer to the `Python Development Environment Setup Guide`_ for Google Cloud Platform for instructions.

   .. _Python Development Environment Setup Guide:
       https://cloud.google.com/python/setup

#. Create a virtualenv. Samples are compatible with Python 2.7 and 3.4+.

    .. code-block:: bash

        $ virtualenv env
        $ source env/bin/activate

#. Install the dependencies needed to run the samples.

    .. code-block:: bash

        $ pip install -r requirements.txt

.. _pip: https://pip.pypa.io/
.. _virtualenv: https://virtualenv.pypa.io/

Samples
-------------------------------------------------------------------------------

Verify attestations and certificate chains for keys generated by Cloud HSM
+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++

.. image:: https://gstatic.com/cloudssh/images/open-btn.png
   :target: https://console.cloud.google.com/cloudshell/open?git_repo=https://github.com/GoogleCloudPlatform/python-docs-samples&page=editor&open_in_editor=kms/attestations/verify_attestation_chains.py,kms/attestations/README.rst




To run this sample:

.. code-block:: bash

    $ python verify_attestation_chains.py

    usage: verify_attestation_chains.py [-h] [--certificates CERTIFICATES]
                                        [--attestation ATTESTATION]

    This application verifies HSM attestations using certificate chains
    obtained from Cloud HSM and the HSM manufacturer.

    For more information, visit https://cloud.google.com/kms/docs/attest-key.

    optional arguments:
      -h, --help            show this help message and exit
      --certificates CERTIFICATES
                            The certificate chains filename.
      --attestation ATTESTATION
                            The attestation filename.



Verify attestations for keys generated by Cloud HSM
+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++

.. image:: https://gstatic.com/cloudssh/images/open-btn.png
   :target: https://console.cloud.google.com/cloudshell/open?git_repo=https://github.com/GoogleCloudPlatform/python-docs-samples&page=editor&open_in_editor=kms/attestations/verify_attestation.py,kms/attestations/README.rst




To run this sample:

.. code-block:: bash

    $ python verify_attestation.py

    usage: verify_attestation.py [-h] attestation_file bundle_file

    This application verifies HSM attestations using certificate bundles obtained
    from Cloud HSM. For more information, visit https://cloud.google.com/kms/docs
    /attest-key.

    positional arguments:
      attestation_file  Name of attestation file.
      bundle_file       Name of certificate bundle file.

    optional arguments:
      -h, --help        show this help message and exit





.. _Google Cloud SDK: https://cloud.google.com/sdk/
